### 관계는 최대한 단방향으로 구성하라

### 실무에서 하다보면 조회나 JPQL 작성을 좀 더 편하게 하려면 양방향으로 작성할일이 생김

### 단방향으로 설계하는게 가장 중요하다


### 연관관계 매핑시 고려사항 3가지

- 다중성
- 단방향, 양방향
- 연관관계의 주인


#### 다중성

데이터 베이스와 매핑하기 위해서 존재

애매할때는 반대쪽에서 생각해보면 됨

- 다대일 : @ManyToOne
- 일대다 : @OneToMany
- 일대일 : @OneToOne
- 다대다 : @ManyToMany. 사용금지

#### 단방향, 양방향

- 테이블
  - 외래키 하나로 양쪽 조인 가능
  - 사실 방향이라는 개념은 없음
- 객체
  - 참조용 필드가 있는 쪽으로만 참조 가능
  - 한쪽만 참조하면 단방향
  - 양쪽이 서로 참조하면 양방향 (사실은 단방향이 2개 있는 것임)

#### 연관관계의 주인

- 테이블은 외래키 하나로 두테이블이 연관관계를 맺음
- 객체 양방향 관계는 A->B, B->A 처럼 참조가 2군데
- 양방향 관계는 2군데, 둘중 외래키를 관리할 곳을 지정해야 함
- 연관관계의 주인 : 외래키를 관리하는 참조
- 주인의 반대변 : 외래키에 영향을 주지 않고 단순 조회만 함


### 다대일

#### 다대일 단방향

1:N 일때 N에 외래키가 존재해야함.

가장 많이 사용하는 관계

반대는 일대다


#### 다대일 단방향

"다"가 연관관계의 주인

#### 다대일 양방향 정리

양방향이라고 해서 테이블 구조가 바뀌지는 않음

Team 클래스에 @OneToMany(mappedBy = "team") private List<Member> members = new ArrayList<>(); 를 추가하면 됨

외래키가 있는 쪽이 연관관계의 주인

양쪽을 서로 참조하도록 개발
